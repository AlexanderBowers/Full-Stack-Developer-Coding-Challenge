{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Alex/dev/Full-Stack-Developer-Coding-Challenge/frontend/src/containers/HomePage.js\";\nimport React, { Component } from 'react';\nimport SortingTable from '../components/SortingTable';\nimport { ALERTCOLUMNS } from '../components/AlertColumns';\nimport { CONTACTCOLUMNS } from '../components/ContactColumns';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass HomePage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n  }\n\n  getInfo(database) {\n    let token = localStorage.getItem(\"token\");\n    fetch(`https://https://intense-castle-68633.herokuapp.com/${database}`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        [database]: data\n      });\n    });\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem(\"token\");\n    token ? fetch(`https://https://intense-castle-68633.herokuapp.com/api/v1/profile`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        user: data.user.username\n      });\n    }).then(this.getInfo('contacts')).then(this.getInfo('alerts')) : this.props.history.push(\"/\");\n  }\n\n  render() {\n    return this.state.contacts && this.state.alerts ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: `total contacts: ${this.state.contacts.length}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SortingTable, {\n        table: this.state.contacts,\n        columns: CONTACTCOLUMNS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(SortingTable, {\n        table: this.state.alerts,\n        columns: ALERTCOLUMNS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 86\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }, this);\n  }\n\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/mnt/c/Users/Alex/dev/Full-Stack-Developer-Coding-Challenge/frontend/src/containers/HomePage.js"],"names":["React","Component","SortingTable","ALERTCOLUMNS","CONTACTCOLUMNS","HomePage","state","getInfo","database","token","localStorage","getItem","fetch","method","headers","Authorization","then","res","json","data","setState","componentDidMount","user","username","props","history","push","render","contacts","alerts","length"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAAQC,YAAR,QAA2B,4BAA3B;AACA,SAAQC,cAAR,QAA6B,8BAA7B;;;AAGA,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAE9BK,KAF8B,GAEtB,EAFsB;AAAA;;AAK9BC,EAAAA,OAAO,CAAEC,QAAF,EAAY;AACf,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACAC,IAAAA,KAAK,CAAE,sDAAqDJ,QAAS,EAAhE,EAAkE;AACnEK,MAAAA,MAAM,EAAE,KAD2D;AAEnEC,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAG,UAASN,KAAM;AAD1B;AAF0D,KAAlE,CAAL,CAMEO,IANF,CAMOC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANd,EAOEF,IAPF,CAOOG,IAAI,IAAI;AACV,WAAKC,QAAL,CAAc;AAAC,SAACZ,QAAD,GAAYW;AAAb,OAAd;AACH,KATF;AAUH;;AAEAE,EAAAA,iBAAiB,GAAG;AAChB,QAAIZ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACAF,IAAAA,KAAK,GACLG,KAAK,CAAE,mEAAF,EAAqE;AACtEC,MAAAA,MAAM,EAAE,KAD8D;AAEtEC,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAG,UAASN,KAAM;AAD1B;AAF6D,KAArE,CAAL,CAMCO,IAND,CAMMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANb,EAOCF,IAPD,CAOMG,IAAI,IAAI;AACV,WAAKC,QAAL,CAAc;AACVE,QAAAA,IAAI,EAAEH,IAAI,CAACG,IAAL,CAAUC;AADN,OAAd;AAGH,KAXD,EAYCP,IAZD,CAYM,KAAKT,OAAL,CAAa,UAAb,CAZN,EAaCS,IAbD,CAaM,KAAKT,OAAL,CAAa,QAAb,CAbN,CADK,GAgBN,KAAKiB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,CAhBC;AAiBH;;AAKDC,EAAAA,MAAM,GAAG;AACL,WACI,KAAKrB,KAAL,CAAWsB,QAAX,IAAuB,KAAKtB,KAAL,CAAWuB,MAAlC,gBACA;AAAA,8BACI;AAAA,kBAAK,mBAAkB,KAAKvB,KAAL,CAAWsB,QAAX,CAAoBE,MAAO;AAAlD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,YAAD;AAAc,QAAA,KAAK,EAAE,KAAKxB,KAAL,CAAWsB,QAAhC;AAA0C,QAAA,OAAO,EAAExB;AAAnD;AAAA;AAAA;AAAA;AAAA,cAFJ,oBAEyE,QAAC,YAAD;AAAc,QAAA,KAAK,EAAE,KAAKE,KAAL,CAAWuB,MAAhC;AAAwC,QAAA,OAAO,EAAE1B;AAAjD;AAAA;AAAA;AAAA;AAAA,cAFzE;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,gBAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPN;AAWH;;AAvD4B;;AA0DjC,eAAeE,QAAf","sourcesContent":["import React, {Component} from 'react'\nimport SortingTable from '../components/SortingTable'\nimport {ALERTCOLUMNS} from '../components/AlertColumns'\nimport {CONTACTCOLUMNS} from '../components/ContactColumns'\n\n\nclass HomePage extends Component {\n\n   state = {    \n   }\n\n   getInfo (database) {\n       let token = localStorage.getItem(\"token\")\n       fetch(`https://https://intense-castle-68633.herokuapp.com/${database}`,{\n           method: \"GET\",\n           headers: {\n               Authorization: `Bearer ${token}`\n            }\n        })\n        .then(res => res.json())\n        .then(data => {\n            this.setState({[database]: data})\n        })\n   }\n\n    componentDidMount() {\n        let token = localStorage.getItem(\"token\")\n        token ? (\n        fetch(`https://https://intense-castle-68633.herokuapp.com/api/v1/profile`,{\n            method: \"GET\",\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        })\n        .then(res => res.json())\n        .then(data => {\n            this.setState({\n                user: data.user.username\n            })\n        })\n        .then(this.getInfo('contacts'))\n        .then(this.getInfo('alerts'))\n        )\n     : this.props.history.push(\"/\") \n    }\n\n    \n\n\n    render() {\n        return(\n            this.state.contacts && this.state.alerts ? \n            <div>\n                <p>{`total contacts: ${this.state.contacts.length}`}</p>\n                <SortingTable table={this.state.contacts} columns={CONTACTCOLUMNS}/> <SortingTable table={this.state.alerts} columns={ALERTCOLUMNS}/>\n                \n            </div>\n            : <div>\n                Loading data...\n            </div>\n        )\n    }\n}\n\nexport default HomePage"]},"metadata":{},"sourceType":"module"}